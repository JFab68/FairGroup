import { useParams } from 'react-router-dom'; import { useQuery } from 'react-query'; import api from '../../services/api'; import { useAuth } from '../../hooks/useAuth'; const SubcommitteeDetail = () => { const { id } = useParams(); const { member } = useAuth(); const { data: subcommittee, isLoading } = useQuery(['subcommittee', id], () => api.get(`/api/subcommittees/${id}`).then(res => res.data)); if (isLoading) return <div>Loading...</div>; const canManage = member.role === 'admin' || member.id === subcommittee.chair?.id || member.id === subcommittee.vice_chair?.id; return (<div><h1>{subcommittee.name}</h1><p>{subcommittee.description}</p><section style={{ marginTop: '2rem' }}><h3>Leadership</h3><p><strong>Chair:</strong> {subcommittee.chair?.name} ({subcommittee.chair?.email})</p><p><strong>Vice Chair:</strong> {subcommittee.vice_chair?.name} ({subcommittee.vice_chair?.email})</p></section><section style={{ marginTop: '2rem' }}><h3>Meeting Schedule</h3><p>{subcommittee.meeting_schedule}</p>{canManage && <button className='btn-primary' style={{ marginTop: '1rem' }}>Edit Schedule</button>}</section><section style={{ marginTop: '2rem' }}><h3>Members ({subcommittee.members?.length || 0})</h3><ul style={{ listStyle: 'none', padding: 0 }}>{subcommittee.members?.map(m => (<li key={m.id} style={{ padding: '0.5rem 0' }}>{m.name} ({m.email})</li>))}</ul>{canManage && <button className='btn-primary'>Manage Members</button>}</section></div>); }; export default SubcommitteeDetail;
